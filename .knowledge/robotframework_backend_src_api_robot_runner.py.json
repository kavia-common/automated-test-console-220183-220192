{"is_source_file": true, "format": "Python", "description": "This file defines a Python class `RobotRunController` responsible for managing and executing Robot Framework test runs asynchronously. It includes methods to start, stop, and monitor test execution, utilizing asyncio for concurrency, and directly integrates with Robot Framework's CLI through `run_cli`. The file also interacts with a database layer to record test runs, results, and logs. It contains configuration for test execution, logging, and handling multiple loops or batch runs.", "external_files": ["robot", "sqlalchemy.orm", "src.core.settings", "src.db.repositories", "src.db.database"], "external_methods": ["robot.run_cli", "sqlalchemy.orm.Session", "src.core.settings.settings", "src.db.repositories.create_test_run", "src.db.repositories.finalize_test_run", "src.db.repositories.add_batch_log", "src.db.repositories.add_fail_log", "src.db.repositories.add_case_result", "src.db.repositories.count_case_status", "src.db.database.SessionLocal"], "published": ["controller"], "classes": [{"name": "RobotRunController", "description": "Controls a single Robot Framework run, managing its lifecycle asynchronously, coordinating database updates, logging, and process execution."}], "methods": [{"name": "Dict[str,Any] run( self, project: Optional[str] = None, suite: Optional[str] = None, tests: Optional[List[str]] = None, include_tags: Optional[List[str]] = None, exclude_tags: Optional[List[str]] = None, variables: Optional[Dict[str, Any]] = None, loop: int = 1, dry_run: bool = False, batch: bool = False, )", "description": "Schedules and executes a Robot Framework run asynchronously, creating necessary logs and database records.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "None _execute_robot( self, log_dir: str, project: Optional[str], suite: Optional[str], tests: Optional[List[str]], include_tags: Optional[List[str]], exclude_tags: Optional[List[str]], variables: Optional[Dict[str, Any]], loop: int, dry_run: bool, batch: bool, )", "description": "Internal method to execute Robot tests with specified parameters, handle looping, batching, and update logs/db accordingly.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "Dict[str,Any] stop(self)", "description": "Signals the current run to stop gracefully, if ongoing.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "Optional[int] get_current_run(self)", "description": "Returns the current running test ID if a test is in progress.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "Optional[str] get_log_file(self)", "description": "Returns the current log file path being used for the ongoing run.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "None set_expected_total(self, total: int)", "description": "Sets the expected total number of test cases for progress tracking.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "int get_expected_total(self)", "description": "Retrieves the expected total number of test cases.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "Dict[str,Any] get_current_case_info(self)", "description": "Provides information about the current test case in execution.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "AsyncGenerator[str,None] stream_log(self)", "description": "Asynchronous generator that streams log updates for live monitoring.", "scope": "RobotRunController", "scopeKind": "class"}, {"name": "None __init__(self)", "scope": "RobotRunController", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] build_args()", "scope": "RobotRunController._execute_robot", "scopeKind": "member", "description": "unavailable"}, {"name": "None write_line(msg: str)", "scope": "RobotRunController._execute_robot", "scopeKind": "member", "description": "unavailable"}], "calls": ["run_cli", "create_test_run", "finalize_test_run", "add_batch_log", "add_fail_log", "count_case_status"], "search-terms": ["RobotRunController", "asyncio.Lock", "run_cli", "test run management", "robot framework execution", "session database", "log streaming", "batch test execution"], "state": 2, "file_id": 14, "knowledge_revision": 36, "git_revision": "", "ctags": [{"_type": "tag", "name": "RobotRunController", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^class RobotRunController:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "_execute_robot", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    async def _execute_robot($/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "( self, log_dir: str, project: Optional[str], suite: Optional[str], tests: Optional[List[str]], include_tags: Optional[List[str]], exclude_tags: Optional[List[str]], variables: Optional[Dict[str, Any]], loop: int, dry_run: bool, batch: bool, )", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "build_args", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^        def build_args() -> List[str]:$/", "file": true, "language": "Python", "typeref": "typename:List[str]", "kind": "function", "signature": "()", "scope": "RobotRunController._execute_robot", "scopeKind": "member"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^controller = RobotRunController()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_current_case_info", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    def get_current_case_info(self) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_run", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    def get_current_run(self) -> Optional[int]:$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "get_expected_total", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    def get_expected_total(self) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "get_log_file", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    def get_log_file(self) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "run", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    async def run($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "( self, project: Optional[str] = None, suite: Optional[str] = None, tests: Optional[List[str]] = None, include_tags: Optional[List[str]] = None, exclude_tags: Optional[List[str]] = None, variables: Optional[Dict[str, Any]] = None, loop: int = 1, dry_run: bool = False, batch: bool = False, )", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "set_expected_total", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    def set_expected_total(self, total: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, total: int)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "stop", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    async def stop(self) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "stream_log", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^    async def stream_log(self) -> AsyncGenerator[str, None]:$/", "language": "Python", "typeref": "typename:AsyncGenerator[str,None]", "kind": "member", "signature": "(self)", "scope": "RobotRunController", "scopeKind": "class"}, {"_type": "tag", "name": "write_line", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/robot_runner.py", "pattern": "/^        def write_line(msg: str) -> None:$/", "file": true, "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(msg: str)", "scope": "RobotRunController._execute_robot", "scopeKind": "member"}], "hash": "d5773d076fa3442390dcb5907988b999", "format-version": 4, "code-base-name": "robotframework_backend", "filename": "robotframework_backend/src/api/robot_runner.py", "fields": [{"name": "controller = RobotRunController()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"36": ""}]}