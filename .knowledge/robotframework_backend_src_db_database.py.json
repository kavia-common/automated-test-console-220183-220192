{"is_source_file": true, "format": "Python", "description": "This file sets up database connectivity using SQLAlchemy, including engine creation, session management, database initialization, and configuration handling based on environment variables. It provides utility functions for external modules to access database sessions, initialize the database schema, and retrieve the database URL.", "external_files": ["os", "typing", "sqlalchemy.create_engine", "sqlalchemy.orm.sessionmaker", "sqlalchemy.orm.declarative_base", "sqlalchemy.orm.Session"], "external_methods": ["os.getenv", "os.path.join", "os.makedirs", "Base.metadata.create_all"], "published": ["get_db", "init_db", "get_engine_url"], "classes": [], "methods": [{"name": "Generator[Session,None,None] get_db()", "description": "Provides a generator yielding a SQLAlchemy Session for dependency injection, ensuring proper closing of the session.", "scope": "", "scopeKind": ""}, {"name": "None init_db()", "description": "Initializes the database schema by creating all tables registered in the SQLAlchemy declarative base.", "scope": "", "scopeKind": ""}, {"name": "str get_engine_url()", "description": "Returns the database URL currently used by SQLAlchemy engine for diagnostics or logging.", "scope": "", "scopeKind": ""}], "calls": ["sessionmaker", "create_engine", "sessionmaker()", "Base.metadata.create_all", "os.getenv", "os.path.dirname", "os.makedirs", "Base.metadata.create_all"], "search-terms": ["sessionmaker", "create_engine", "init_db", "get_db", "DATABASE_URL", "declarative_base", "sqlalchemy"], "state": 2, "file_id": 5, "knowledge_revision": 19, "git_revision": "", "revision_history": [{"11": ""}, {"19": ""}], "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^    DATABASE_URL = f\"sqlite:\\/\\/\\/{DEFAULT_SQLITE_PATH}\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^DATABASE_URL = os.getenv(\"DATABASE_URL\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DEFAULT_SQLITE_PATH", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^DEFAULT_SQLITE_PATH = os.path.join(os.path.dirname(os.path.dirname(os.path.dirname(__file__))), /", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^engine = create_engine($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^def get_db() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_engine_url", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^def get_engine_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/db/database.py", "pattern": "/^def init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "f0e2a0cfe24715bcab8da40343383aae", "format-version": 4, "code-base-name": "robotframework_backend", "filename": "robotframework_backend/src/db/database.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = f\"sqlite:\\/\\/\\/{DEFAULT_SQLITE_PATH}\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(\"DATABASE_URL\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_SQLITE_PATH = os.path.join(os.path.dirname(os.path.dirname(os.path.dirname(__file__))), /", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "engine = create_engine(", "scope": "", "scopeKind": "", "description": "unavailable"}]}