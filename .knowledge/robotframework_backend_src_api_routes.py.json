{"is_source_file": true, "format": "Python", "description": "This file defines a FastAPI router for managing and interacting with a Robot Framework backend service. It includes endpoints for starting and stopping test runs, retrieving statistics, progress, current test case info, logs, configuration files, UI locks, and synchronizing or fetching application state. The code ties together several external dependencies such as database session, controller logic, and configuration management.", "external_files": ["src.api.schemas", "src.api.robot_runner", "src.api.config_service", "src.api.state_service", "src.api.log_stream", "src.db.database", "src.db.repositories", "src.core.settings", "src.db.models", "starlette.responses"], "external_methods": ["controller.run", "controller.stop", "controller.get_expected_total", "controller.set_expected_total", "controller.get_current_case_info", "controller.get_log_file", "read_config", "write_config", "list_config_folders", "set_ui_lock", "sync_state", "get_state", "get_log_sse"], "published": ["router"], "classes": [], "methods": [{"name": "RunResponse start_run(payload: RunRequest)", "description": "Starts a robot run with specified parameters, returning run ID, status, and logs path.", "scope": "", "scopeKind": ""}, {"name": "StopResponse stop_run()", "description": "Stops the currently running robot process.", "scope": "", "scopeKind": ""}, {"name": "StatsResponse stats(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Retrieves aggregated statistics for a specific run.", "scope": "", "scopeKind": ""}, {"name": "CaseStatusResponse case_status(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Retrieves the count of passed, failed, and total recorded cases for a specific run.", "scope": "", "scopeKind": ""}, {"name": "ProgressResponse progress(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Calculates and returns the progress percentage of a run based on completed and expected test cases.", "scope": "", "scopeKind": ""}, {"name": "CurrentCaseInfo current_case_info(run_id: int = Query(..., description=\"Run id\"))", "description": "Provides information about the currently executing test case.", "scope": "", "scopeKind": ""}, {"name": "logs()", "description": "Streams log output via Server-Sent Events if enabled.", "scope": "", "scopeKind": ""}, {"name": "batch_log()", "description": "Returns the current batch log contents from the log file.", "scope": "", "scopeKind": ""}, {"name": "fail_log(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Returns formatted failure logs for a specific run.", "scope": "", "scopeKind": ""}, {"name": "ConfigPayload get_config(path: str = Query(..., description=\"Relative config path from CONFIG_DIR\"))", "description": "Reads a configuration file from the config directory.", "scope": "", "scopeKind": ""}, {"name": "ConfigPayload put_config(payload: ConfigPayload)", "description": "Writes configuration data to a file in the config directory.", "scope": "", "scopeKind": ""}, {"name": "ConfigListResponse list_configs()", "description": "Lists available configuration folders.", "scope": "", "scopeKind": ""}, {"name": "ui_lock(payload: UILockRequest)", "description": "Sets or clears the UI lock status.", "scope": "", "scopeKind": ""}, {"name": "GetStateResponse sync_state_route(payload: SyncStateRequest)", "description": "Merges provided state into stored UI/application state and returns updated state.", "scope": "", "scopeKind": ""}, {"name": "GetStateResponse get_state_route()", "description": "Retrieves the current stored UI/application state.", "scope": "", "scopeKind": ""}, {"name": "ExpectedTotalResponse get_expected_total(run_id: int = Query(..., description=\"Run id\"))", "description": "Retrieves the expected total number of test cases for a run.", "scope": "", "scopeKind": ""}, {"name": "ExpectedTotalResponse set_expected_total(run_id: int = Query(..., description=\"Run id\"), total: int = Query(..., description=\"Expected total\"))", "description": "Sets the expected total number of test cases for a run.", "scope": "", "scopeKind": ""}], "calls": ["controller.run", "controller.stop", "get_run_stats", "controller.get_expected_total", "count_case_status", "controller.get_current_case_info", "controller.get_log_file", "read_config", "write_config", "list_config_folders", "set_ui_lock", "sync_state", "get_state"], "search-terms": ["fastapi", "robot framework", "test run management", "log streaming", "config management", "UI lock", "application state", "run statistics", "test case progress", "file-based config", "SSE logs"], "state": 2, "file_id": 16, "knowledge_revision": 73, "git_revision": "bc891e0b1be923598ab01c57566e316a7deeb9d9", "revision_history": [{"40": ""}, {"44": "68f97cc4cc0da114d8a101e32b413fc1281600e0"}, {"73": "bc891e0b1be923598ab01c57566e316a7deeb9d9"}], "ctags": [{"_type": "tag", "name": "batch_log", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def batch_log():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "case_status", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def case_status(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -/", "language": "Python", "typeref": "typename:CaseStatusResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "current_case_info", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def current_case_info(run_id: int = Query(..., description=\"Run id\")) -> CurrentCaseInfo:$/", "language": "Python", "typeref": "typename:CurrentCaseInfo", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"))"}, {"_type": "tag", "name": "fail_log", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def fail_log(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_config", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def get_config(path: str = Query(..., description=\"Relative config path from CONFIG_DIR\")) -> Co/", "language": "Python", "typeref": "typename:ConfigPayload", "kind": "function", "signature": "(path: str = Query(..., description=\"Relative config path from CONFIG_DIR\"))"}, {"_type": "tag", "name": "get_expected_total", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def get_expected_total(run_id: int = Query(..., description=\"Run id\")) -> ExpectedTotalRes/", "language": "Python", "typeref": "typename:ExpectedTotalResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"))"}, {"_type": "tag", "name": "get_state_route", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def get_state_route() -> GetStateResponse:$/", "language": "Python", "typeref": "typename:GetStateResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_configs", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def list_configs() -> ConfigListResponse:$/", "language": "Python", "typeref": "typename:ConfigListResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logs", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def logs():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "progress", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def progress(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -> P/", "language": "Python", "typeref": "typename:ProgressResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "put_config", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def put_config(payload: ConfigPayload) -> ConfigPayload:$/", "language": "Python", "typeref": "typename:ConfigPayload", "kind": "function", "signature": "(payload: ConfigPayload)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^router = APIRouter(tags=[\"robot\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "set_expected_total", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def set_expected_total(run_id: int = Query(..., description=\"Run id\"), total: int = Query(/", "language": "Python", "typeref": "typename:ExpectedTotalResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), total: int = Query(..., description=\"Expected total\"))"}, {"_type": "tag", "name": "start_run", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def start_run(payload: RunRequest) -> RunResponse:$/", "language": "Python", "typeref": "typename:RunResponse", "kind": "function", "signature": "(payload: RunRequest)"}, {"_type": "tag", "name": "stats", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def stats(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -> Stat/", "language": "Python", "typeref": "typename:StatsResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "stop_run", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def stop_run() -> StopResponse:$/", "language": "Python", "typeref": "typename:StopResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sync_state_route", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def sync_state_route(payload: SyncStateRequest) -> GetStateResponse:$/", "language": "Python", "typeref": "typename:GetStateResponse", "kind": "function", "signature": "(payload: SyncStateRequest)"}, {"_type": "tag", "name": "ui_lock", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def ui_lock(payload: UILockRequest):$/", "language": "Python", "kind": "function", "signature": "(payload: UILockRequest)"}], "hash": "1178af05c98625c1d361d7bc030b51c8", "format-version": 4, "code-base-name": "robotframework_backend", "filename": "robotframework_backend/src/api/routes.py", "fields": [{"name": "router = APIRouter(tags=[\"robot\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}