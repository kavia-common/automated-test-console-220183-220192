{"is_source_file": true, "format": "Python", "description": "This file defines API routes for a backend service managing Robot Framework test runs. It includes endpoints for starting/stopping tests, retrieving stats, progress, logs, configuration management, and state synchronization, implemented using FastAPI.", "external_files": ["src.api.schemas", "src.api.robot_runner", "src.api.config_service", "src.api.state_service", "src.api.log_stream", "src.db.database", "src.db.repositories", "src.core.settings", "src.db.models (implied from usage)"], "external_methods": ["controller.run", "controller.stop", "controller.get_expected_total", "controller.set_expected_total", "controller.get_current_case_info", "controller.get_log_file", "read_config", "write_config", "list_config_folders", "set_ui_lock", "sync_state", "get_state", "get_log_sse", "get_db", "get_run_stats", "count_case_status"], "published": ["start_run", "stop_run", "stats", "case_status", "progress", "current_case_info", "logs", "batch_log", "fail_log", "get_config", "put_config", "list_configs", "ui_lock", "sync_state_route", "get_state_route", "get_expected_total", "set_expected_total"], "classes": [], "methods": [{"name": "RunResponse start_run(payload: RunRequest)", "description": "Starts a Robot Framework test run asynchronously with the provided parameters and returns the run ID and status.", "scope": "", "scopeKind": ""}, {"name": "StopResponse stop_run()", "description": "Attempts to stop the currently running Robot Framework process.", "scope": "", "scopeKind": ""}, {"name": "StatsResponse stats(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Retrieves aggregated statistics (total, passed, failed) for a specific test run.", "scope": "", "scopeKind": ""}, {"name": "CaseStatusResponse case_status(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Returns counts of passed, failed, and total recorded test cases for a specific run.", "scope": "", "scopeKind": ""}, {"name": "ProgressResponse progress(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Computes and returns the progress percentage of a test run based on expected total and cases completed.", "scope": "", "scopeKind": ""}, {"name": "CurrentCaseInfo current_case_info(run_id: int = Query(..., description=\"Run id\"))", "description": "Provides information about the currently executing test case within a run.", "scope": "", "scopeKind": ""}, {"name": "logs()", "description": "Streams the current run logs via Server-Sent Events (SSE) if enabled.", "scope": "", "scopeKind": ""}, {"name": "str batch_log()", "description": "Returns the entire current log file's contents for polling fallback.", "scope": "", "scopeKind": ""}, {"name": "str fail_log(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))", "description": "Aggregates and returns failure log messages for a specific test run.", "scope": "", "scopeKind": ""}, {"name": "ConfigPayload get_config(path: str = Query(..., description=\"Relative config path from CONFIG_DIR\"))", "description": "Reads and returns the configuration file content from the config directory.", "scope": "", "scopeKind": ""}, {"name": "ConfigPayload put_config(payload: ConfigPayload)", "description": "Writes provided content to a configuration file in the config directory.", "scope": "", "scopeKind": ""}, {"name": "ConfigListResponse list_configs()", "description": "Lists available configuration folders.", "scope": "", "scopeKind": ""}, {"name": "ui_lock(payload: UILockRequest)", "description": "Sets or clears the UI lock to prevent concurrent user actions.", "scope": "", "scopeKind": ""}, {"name": "GetStateResponse sync_state_route(payload: SyncStateRequest)", "description": "Merges provided UI/application state into the stored state and returns the updated state.", "scope": "", "scopeKind": ""}, {"name": "GetStateResponse get_state_route()", "description": "Retrieves the current stored UI/application state.", "scope": "", "scopeKind": ""}, {"name": "ExpectedTotalResponse get_expected_total(run_id: int = Query(..., description=\"Run id\"))", "description": "Gets the expected total number of test cases for the current run.", "scope": "", "scopeKind": ""}, {"name": "ExpectedTotalResponse set_expected_total(run_id: int = Query(..., description=\"Run id\"), total: int = Query(..., description=\"Expected total\"))", "description": "Sets the expected total number of test cases for the current run.", "scope": "", "scopeKind": ""}], "search-terms": ["robot", "test run API", "controller", "config management", "log streaming", "state synchronization", "test case progress", "FastAPI routes", "async endpoints"], "state": 2, "file_id": 16, "knowledge_revision": 40, "git_revision": "", "ctags": [{"_type": "tag", "name": "batch_log", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def batch_log() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "case_status", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def case_status(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -/", "language": "Python", "typeref": "typename:CaseStatusResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "current_case_info", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def current_case_info(run_id: int = Query(..., description=\"Run id\")) -> CurrentCaseInfo:$/", "language": "Python", "typeref": "typename:CurrentCaseInfo", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"))"}, {"_type": "tag", "name": "fail_log", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def fail_log(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -> s/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_config", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def get_config(path: str = Query(..., description=\"Relative config path from CONFIG_DIR\")) -> Co/", "language": "Python", "typeref": "typename:ConfigPayload", "kind": "function", "signature": "(path: str = Query(..., description=\"Relative config path from CONFIG_DIR\"))"}, {"_type": "tag", "name": "get_expected_total", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def get_expected_total(run_id: int = Query(..., description=\"Run id\")) -> ExpectedTotalRes/", "language": "Python", "typeref": "typename:ExpectedTotalResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"))"}, {"_type": "tag", "name": "get_state_route", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def get_state_route() -> GetStateResponse:$/", "language": "Python", "typeref": "typename:GetStateResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_configs", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def list_configs() -> ConfigListResponse:$/", "language": "Python", "typeref": "typename:ConfigListResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logs", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def logs():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "progress", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def progress(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -> P/", "language": "Python", "typeref": "typename:ProgressResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "put_config", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def put_config(payload: ConfigPayload) -> ConfigPayload:$/", "language": "Python", "typeref": "typename:ConfigPayload", "kind": "function", "signature": "(payload: ConfigPayload)"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^router = APIRouter(tags=[\"robot\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "set_expected_total", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def set_expected_total(run_id: int = Query(..., description=\"Run id\"), total: int = Query(/", "language": "Python", "typeref": "typename:ExpectedTotalResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), total: int = Query(..., description=\"Expected total\"))"}, {"_type": "tag", "name": "start_run", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def start_run(payload: RunRequest) -> RunResponse:$/", "language": "Python", "typeref": "typename:RunResponse", "kind": "function", "signature": "(payload: RunRequest)"}, {"_type": "tag", "name": "stats", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^def stats(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db)) -> Stat/", "language": "Python", "typeref": "typename:StatsResponse", "kind": "function", "signature": "(run_id: int = Query(..., description=\"Run id\"), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "stop_run", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def stop_run() -> StopResponse:$/", "language": "Python", "typeref": "typename:StopResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sync_state_route", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def sync_state_route(payload: SyncStateRequest) -> GetStateResponse:$/", "language": "Python", "typeref": "typename:GetStateResponse", "kind": "function", "signature": "(payload: SyncStateRequest)"}, {"_type": "tag", "name": "ui_lock", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/src/api/routes.py", "pattern": "/^async def ui_lock(payload: UILockRequest):$/", "language": "Python", "kind": "function", "signature": "(payload: UILockRequest)"}], "hash": "e5b8f3ea7a8e85e6ab754423353af178", "format-version": 4, "code-base-name": "robotframework_backend", "filename": "robotframework_backend/src/api/routes.py", "fields": [{"name": "router = APIRouter(tags=[\"robot\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"40": ""}]}