{"is_source_file": true, "format": "Python", "description": "This file is a test configuration script for a Python-based web application using pytest, FastAPI, and SQLAlchemy. It defines fixtures for creating isolated test environments, including temporary directories, separate test database engines, and overrides for application settings and dependencies to facilitate testing.", "external_files": ["src.api.main", "src.db.database", "src.core.settings"], "external_methods": ["pytest.fixture", "pytest.mark.parametrize", "shutil.rmtree", "tempfile.mkdtemp", "shutil.rmtree", "os.path.join", "os.makedirs", "create_engine", "Base.metadata.create_all", "sessionmaker", "Session"], "published": ["tmp_workdir", "test_paths", "test_db_engine", "TestSessionLocal", "_test_db_session_factory", "override_settings_and_env", "app_client", "db_session"], "classes": [], "methods": [{"name": "tmp_workdir()", "description": "Creates a temporary directory for test files, cleaned up after tests.", "scope": "", "scopeKind": ""}, {"name": "test_paths(tmp_workdir)", "description": "Provides paths for logs, configs, and robot project root within the temporary directory.", "scope": "", "scopeKind": ""}, {"name": "test_db_engine(tmp_workdir)", "description": "Sets up an isolated SQLite database engine for testing, creating all database tables.", "scope": "", "scopeKind": ""}, {"name": "TestSessionLocal(test_db_engine)", "description": "A session factory bound to the test database engine for creating database sessions.", "scope": "", "scopeKind": ""}, {"name": "_test_db_session_factory(SessionLocal)", "description": "Context manager that yields a database session from the session factory and ensures proper cleanup.", "scope": "", "scopeKind": ""}, {"name": "override_settings_and_env(test_paths, test_db_engine)", "description": "Overrides application settings to point to test directories and enables usage of SSE by default for tests.", "scope": "", "scopeKind": ""}, {"name": "app_client(TestSessionLocal, monkeypatch)", "description": "Provides a FastAPI test client with dependencies overridden for isolated testing of API endpoints.", "scope": "", "scopeKind": ""}, {"name": "db_session(TestSessionLocal)", "description": "Provides access to a database session for repository-level tests.", "scope": "", "scopeKind": ""}, {"name": "str fake_get_engine_url()", "scope": "app_client", "scopeKind": "function", "description": "unavailable"}, {"name": "get_db_override()", "scope": "app_client", "scopeKind": "function", "description": "unavailable"}], "calls": ["Base.metadata.create_all", "sessionmaker", "shutil.rmtree", "os.makedirs", "app.dependency_overrides", "TestClient", "get_db"], "search-terms": ["pytest fixtures", "test database setup", "FastAPI dependency override", "temporary directories", "sessionmaker", "override settings in tests"], "state": 2, "file_id": 19, "knowledge_revision": 55, "git_revision": "", "ctags": [{"_type": "tag", "name": "TestSessionLocal", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def TestSessionLocal(test_db_engine):$/", "language": "Python", "kind": "function", "signature": "(test_db_engine)"}, {"_type": "tag", "name": "_test_db_session_factory", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def _test_db_session_factory(SessionLocal):$/", "language": "Python", "kind": "function", "signature": "(SessionLocal)"}, {"_type": "tag", "name": "app_client", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def app_client(TestSessionLocal, monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(TestSessionLocal, monkeypatch)"}, {"_type": "tag", "name": "db_module", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    from src.db import database as db_module$/", "file": true, "language": "Python", "kind": "unknown", "scope": "app_client", "scopeKind": "function", "nameref": "unknown:database"}, {"_type": "tag", "name": "db_session", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def db_session(TestSessionLocal):$/", "language": "Python", "kind": "function", "signature": "(TestSessionLocal)"}, {"_type": "tag", "name": "fake_get_engine_url", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    def fake_get_engine_url() -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()", "scope": "app_client", "scopeKind": "function"}, {"_type": "tag", "name": "get_db_override", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    def get_db_override():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "app_client", "scopeKind": "function"}, {"_type": "tag", "name": "original_get_db", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    from src.db.database import get_db as original_get_db$/", "file": true, "language": "Python", "kind": "unknown", "scope": "app_client", "scopeKind": "function", "nameref": "unknown:get_db"}, {"_type": "tag", "name": "override_settings_and_env", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def override_settings_and_env(test_paths, test_db_engine):$/", "language": "Python", "kind": "function", "signature": "(test_paths, test_db_engine)"}, {"_type": "tag", "name": "test_db_engine", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def test_db_engine(tmp_workdir):$/", "language": "Python", "kind": "function", "signature": "(tmp_workdir)"}, {"_type": "tag", "name": "test_paths", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def test_paths(tmp_workdir):$/", "language": "Python", "kind": "function", "signature": "(tmp_workdir)"}, {"_type": "tag", "name": "tmp_workdir", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def tmp_workdir():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "edb20add45d0aaabe6e2680144a7c624", "format-version": 4, "code-base-name": "robotframework_backend", "filename": "robotframework_backend/tests/conftest.py", "revision_history": [{"55": ""}]}