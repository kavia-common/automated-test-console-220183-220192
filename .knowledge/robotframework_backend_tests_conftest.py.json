{"is_source_file": true, "format": "Python", "description": "This file is a test configuration script for setting up the testing environment of a FastAPI application. It defines fixtures for temporary directories, database engine, and app clients, primarily used for pytest testing of the web application. It also manages environment variables and imports application modules for testing purposes.", "external_files": ["src/db/database.py", "src/core/settings.py", "src/api/main.py"], "external_methods": ["pytest fixture functions", "create_engine", "sessionmaker", "Base.metadata.create_all", "shutil.rmtree", "os.environ.setdefault", "os.makedirs"], "published": ["tmp_workdir", "test_paths", "test_db_engine", "TestSessionLocal", "_test_db_session_factory", "override_settings_and_env", "app_client", "db_session"], "classes": [], "methods": [{"name": "tmp_workdir()", "description": "Fixture that creates and cleans up a temporary root directory for testing.", "scope": "", "scopeKind": ""}, {"name": "test_paths(tmp_workdir)", "description": "Fixture that creates subdirectories for logs, configs, and robot project within the temporary root.", "scope": "", "scopeKind": ""}, {"name": "test_db_engine(tmp_workdir)", "description": "Fixture that creates an isolated SQLite database engine for testing and initializes database schema.", "scope": "", "scopeKind": ""}, {"name": "TestSessionLocal(test_db_engine)", "description": "Factory for SQLAlchemy sessions bound to the test database engine.", "scope": "", "scopeKind": ""}, {"name": "_test_db_session_factory(SessionLocal)", "description": "Context manager to provide a database session for testing, ensuring proper cleanup.", "scope": "", "scopeKind": ""}, {"name": "override_settings_and_env(test_paths, test_db_engine)", "description": "Fixture to override environment variables and settings paths for testing, ensuring isolation.", "scope": "", "scopeKind": ""}, {"name": "app_client(TestSessionLocal, monkeypatch)", "description": "Fixture that provides a FastAPI TestClient with overridden database dependency and environment setup.", "scope": "", "scopeKind": ""}, {"name": "db_session(TestSessionLocal)", "description": "Fixture that offers a direct database session for repository-level tests.", "scope": "", "scopeKind": ""}, {"name": "str fake_get_engine_url()", "scope": "app_client", "scopeKind": "function", "description": "unavailable"}, {"name": "get_db_override()", "scope": "app_client", "scopeKind": "function", "description": "unavailable"}], "calls": ["os.environ.setdefault", "shutil.rmtree", "Base.metadata.create_all", "os.makedirs"], "search-terms": ["conftest", "pytest fixtures", "FastAPI test client", "test database setup", "environment override", "app dependency override"], "state": 2, "file_id": 19, "knowledge_revision": 102, "git_revision": "4ef46a3032ded40dd7b2999f7df2bfa655dfe8b9", "revision_history": [{"55": ""}, {"80": "0fbc1abf78aec09dee7f4ab6c10f2d1167b39b5a"}, {"81": "0fbc1abf78aec09dee7f4ab6c10f2d1167b39b5a"}, {"88": "0fbc1abf78aec09dee7f4ab6c10f2d1167b39b5a"}, {"93": "0fbc1abf78aec09dee7f4ab6c10f2d1167b39b5a"}, {"95": "902d1a8c446ed4e0108b2ce9e1c9b95329664a52"}, {"96": "902d1a8c446ed4e0108b2ce9e1c9b95329664a52"}, {"98": "902d1a8c446ed4e0108b2ce9e1c9b95329664a52"}, {"102": "4ef46a3032ded40dd7b2999f7df2bfa655dfe8b9"}], "ctags": [{"_type": "tag", "name": "TestSessionLocal", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def TestSessionLocal(test_db_engine):$/", "language": "Python", "kind": "function", "signature": "(test_db_engine)"}, {"_type": "tag", "name": "_test_db_session_factory", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def _test_db_session_factory(SessionLocal):$/", "language": "Python", "kind": "function", "signature": "(SessionLocal)"}, {"_type": "tag", "name": "_tmp_root", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^_tmp_root = tempfile.mkdtemp(prefix=\"rf_backend_tests_\")  # noqa: E402$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app_client", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def app_client(TestSessionLocal, monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(TestSessionLocal, monkeypatch)"}, {"_type": "tag", "name": "db_module", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    from src.db import database as db_module$/", "file": true, "language": "Python", "kind": "unknown", "scope": "app_client", "scopeKind": "function", "nameref": "unknown:database"}, {"_type": "tag", "name": "db_session", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def db_session(TestSessionLocal):$/", "language": "Python", "kind": "function", "signature": "(TestSessionLocal)"}, {"_type": "tag", "name": "fake_get_engine_url", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    def fake_get_engine_url() -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()", "scope": "app_client", "scopeKind": "function"}, {"_type": "tag", "name": "get_db_override", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    def get_db_override():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "app_client", "scopeKind": "function"}, {"_type": "tag", "name": "original_get_db", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^    from src.db.database import get_db as original_get_db$/", "file": true, "language": "Python", "kind": "unknown", "scope": "app_client", "scopeKind": "function", "nameref": "unknown:get_db"}, {"_type": "tag", "name": "override_settings_and_env", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def override_settings_and_env(test_paths, test_db_engine):$/", "language": "Python", "kind": "function", "signature": "(test_paths, test_db_engine)"}, {"_type": "tag", "name": "test_db_engine", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def test_db_engine(tmp_workdir):$/", "language": "Python", "kind": "function", "signature": "(tmp_workdir)"}, {"_type": "tag", "name": "test_paths", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def test_paths(tmp_workdir):$/", "language": "Python", "kind": "function", "signature": "(tmp_workdir)"}, {"_type": "tag", "name": "tmp_workdir", "path": "/home/kavia/workspace/code-generation/automated-test-console-220183-220192/robotframework_backend/tests/conftest.py", "pattern": "/^def tmp_workdir():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "5715040eff13d5e32663dbb93dc48d34", "format-version": 4, "code-base-name": "robotframework_backend", "filename": "robotframework_backend/tests/conftest.py", "fields": [{"name": "_tmp_root = tempfile.mkdtemp(prefix=\"rf_backend_tests_\")  # noqa: E402", "scope": "", "scopeKind": "", "description": "unavailable"}]}